"use strict";require(["config"],function(){require(["jquery","template","cookie","header","footer"],function(h,r,e,l,t){function i(){h("#shopTable tbody");var e=h.cookie("cart");if(null!=e){var t=JSON.parse(e),n=r("trtemp",{tr:t});h("#tbody").html(n)}}function p(){var t=0,e=h("#allSelect input")[0],n=h("#tbody #select input");e.onchange=function(){if(this.checked){for(var e=0;e<n.length;e++)n[e].checked=!0;t=n.length}else{for(e=0;e<n.length;e++)n[e].checked=!1;t=0}s()};for(var r=0;r<n.length;r++)n[r].onchange=function(){this.checked?t++:t--,t===n.length?e.checked=!0:e.checked=!1,s()}}function s(){for(var e=0,t=h("#tbody #select input"),n=h.cookie("cart"),r=JSON.parse(n),o=0;o<r.length;o++)1==t[o].checked&&(e+=r[o].price*r[o].num);h("#accounts em").html(e)}var n;h("#header").load("/html/component/header.html #headerTop",function(){l.nav(),l.cookie(),l.shopNum()}),h("#footer").load("/html/component/footer.html"),i(),h("tbody").on("click","#delBtn",function(){var e=h(this).parent().parent().find("#Id").html();e=parseInt(e);for(var t=h.cookie("cart"),n=JSON.parse(t),r=0;r<n.length;r++)n[r].id==e&&(console.log(n[r]),n.splice(r,1));var o=JSON.stringify(n);h.cookie("cart",o,{path:"/",expires:1}),i(),l.shopNum(),p(),s()}),p(),s(),(n=h("#tbody")).on("click",".add-btn",function(e){var t=h(this).prev().val(),n=h(this).parent().parent().find("#Id").html(),r=h(this).parent().parent().find("#singleAccount"),o=h.cookie("cart"),i=JSON.parse(o);t++,h(this).prev().val(t);for(var c=0;c<i.length;c++)if(i[c].id==n){i[c].num=t,r.html(t*i[c].price);break}var a=JSON.stringify(i);h.cookie("cart",a,{path:"/",expires:1}),l.shopNum(),p(),s()}),n.on("click",".sub-btn",function(e){var t=h(this).next().val(),n=h(this).parent().parent().find("#Id").html(),r=h(this).parent().parent().find("#singleAccount"),o=h.cookie("cart"),i=JSON.parse(o);if(0==t)t=0;else{t--,h(this).next().val(t);for(var c=0;c<i.length;c++)if(i[c].id==n){i[c].num=t,r.html(t*i[c].price);break}var a=JSON.stringify(i);h.cookie("cart",a,{path:"/",expires:1}),l.shopNum(),p(),s()}})})});