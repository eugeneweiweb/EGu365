"use strict";define(["jquery","template","header"],function(I,r,x){function t(){}return t.prototype.ajax=function(){var n,t=1;function a(e){I.ajax({method:"get",dataType:"json",url:"http://rap2api.taobao.org/app/mock/data/682630",success:function(t){n=t.allPage;var a=r("pro-template",{products:t.data});I("#prolist").html(a),I("#prolist li .proId").css({display:"none"}),I("#pageBtn i em").html(e),I("#pageBtn i span").html(n)}})}a(1),I("#pageBtn").on("click","input",function(){if("homepage"===I(this).attr("class")&&a(t=1),"prevpage"===I(this).attr("class")){if(1===t)return;a(--t)}if("nextpage"===I(this).attr("class")){if(t===n)return;a(++t)}"endpage"===I(this).attr("class")&&a(t=n)})},t.prototype.addToCart=function(){I("#prolist").on("click",".to-cart input",function(t){var a=new Array,e=new Array,n=new Array,r=I(this).parent().parent().find(".proId").html(),i=I(this).parent().parent().find(".proImg a img").attr("src"),p=I(this).parent().parent().find(".proName").html(),o=I(this).parent().parent().find(".proInfo").html(),s=I(this).parent().parent().find(".bazaarprice").html(),c=parseInt(r),l=I.cookie("cart");if(null!=l)for(var h=JSON.parse(l),m=0;m<h.length;m++){var f={id:h[m].id,img:h[m].img,name:h[m].name,info:h[m].info,price:h[m].price,num:h[m].num};e.push(f)}for(var u=0;u<e.length;u++)if(e[u].id==c){e[u].num++;break}if(u>=e.length){var d={id:r,img:i,name:p,info:o,price:s,num:1};n.push(d),e=e.concat(n)}a=a.concat(e);var g=JSON.stringify(a);I.cookie("cart",g,{path:"/",expires:1}),I("#header").load("/html/component/header.html #headerTop",function(){x.nav(),x.cookie(),x.shopNum()});var v=6,y=document.createElement("span");y.innerHTML="+1",I(this).parent().append(y),y.style.top=v+"px";var k=setInterval(function(){v++,y.style.top=v+"px",30<=v&&(clearInterval(k),y.remove())},30)})},new t});