"use strict";define(["jquery","template","header"],function(k,r,x){function t(){}return t.prototype.ajax=function(){var e,t=1;function a(n){k.ajax({method:"get",dataType:"json",url:"http://rap2api.taobao.org/app/mock/data/682630",success:function(t){e=t.allPage;var a=r("pro-template",{products:t.data});k("#prolist").html(a),k("#prolist li .proId").css({display:"none"}),k("#pageBtn i em").html(n),k("#pageBtn i span").html(e)}})}a(1),k("#pageBtn").on("click","input",function(){if("homepage"===k(this).attr("class")&&a(t=1),"prevpage"===k(this).attr("class")){if(1===t)return;a(--t)}if("nextpage"===k(this).attr("class")){if(t===e)return;a(++t)}"endpage"===k(this).attr("class")&&a(t=e)})},t.prototype.addToCart=function(){k("#prolist").on("click",".to-cart input",function(t){var a=new Array,n=new Array,e=new Array,r=k(this).parent().parent().find(".proId").html(),i=k(this).parent().parent().find(".proImg a img").attr("src"),p=k(this).parent().parent().find(".proName").html(),o=k(this).parent().parent().find(".proInfo").html(),s=k(this).parent().parent().find(".bazprice").html(),c=parseInt(r),l=k.cookie("cart");if(null!=l)for(var m=JSON.parse(l),f=0;f<m.length;f++){var h={id:m[f].id,img:m[f].img,name:m[f].name,info:m[f].info,price:m[f].price,num:m[f].num};n.push(h)}for(var u=0;u<n.length;u++)if(n[u].id==c){n[u].num++;break}if(u>=n.length){var d={id:r,img:i,name:p,info:o,price:s,num:1};e.push(d),n=n.concat(e)}a=a.concat(n);var g=JSON.stringify(a);k.cookie("cart",g,{path:"/",expires:1}),x.shopNum();var v=6,y=document.createElement("span");y.innerHTML="+1",k(this).parent().append(y),y.style.top=v+"px";var I=setInterval(function(){v++,y.style.top=v+"px",30<=v&&(clearInterval(I),y.remove())},30)})},new t});