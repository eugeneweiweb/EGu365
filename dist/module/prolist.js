"use strict";define(["jquery","template"],function(x,r){function t(){}return t.prototype.ajax=function(e){var a,n=1;function t(t){x.ajax({method:"post",data:{pageIndex:t,count:5},dataType:"json",url:"http://localhost/EGu365/api/"+e+".php",success:function(t){a=t.allPage;var e=r("pro-template",{products:t.data});x("#prolist").html(e),x("#prolist li .proId").css({display:"none"}),x("#pageBtn i em").html(n),x("#pageBtn i span").html(a)}})}t(1),x("#pageBtn").on("click","input",function(){if("homepage"===x(this).attr("class")&&t(n=1),"prevpage"===x(this).attr("class")){if(1===n)return;t(--n)}if("nextpage"===x(this).attr("class")){if(n===a)return;t(++n)}"endpage"===x(this).attr("class")&&t(n=a)})},t.prototype.addToCart=function(){x("#prolist").on("click",".to-cart input",function(t){var e=new Array,a=new Array,n=new Array,r=x(this).parent().parent().find(".proId").html(),i=x(this).parent().parent().find(".proImg a img").attr("src"),p=x(this).parent().parent().find(".proName").html(),o=x(this).parent().parent().find(".proInfo").html(),s=x(this).parent().parent().find(".bazaarprice").html(),c=parseInt(r),l=x.cookie("cart");if(null!=l)for(var h=JSON.parse(l),m=0;m<h.length;m++){var d={id:h[m].id,img:h[m].img,name:h[m].name,info:h[m].info,price:h[m].price,num:h[m].num};a.push(d)}for(var u=0;u<a.length;u++)if(a[u].id==c){a[u].num++;break}if(u>=a.length){var f={id:r,img:i,name:p,info:o,price:s,num:1};n.push(f),a=a.concat(n)}e=e.concat(a);var g=JSON.stringify(e);x.cookie("cart",g,{path:"/",expires:1}),x("#header").load("/html/component/header.html #headerTop",function(){header.nav(),header.cookie(),header.shopNum()});var v=6,y=document.createElement("span");y.innerHTML="+1",x(this).parent().append(y),y.style.top=v+"px";var I=setInterval(function(){v++,y.style.top=v+"px",30<=v&&(clearInterval(I),y.remove())},30)})},new t});