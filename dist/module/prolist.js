"use strict";define(["jquery","template","header"],function(x,r,k){function t(){}return t.prototype.ajax=function(n){var a,e=1;function t(t){x.ajax({method:"post",data:{pageIndex:t,count:5},dataType:"json",url:"http://localhost/EGu365/api/"+n+".php",success:function(t){a=t.allPage;var n=r("pro-template",{products:t.data});x("#prolist").html(n),x("#prolist li .proId").css({display:"none"}),x("#pageBtn i em").html(e),x("#pageBtn i span").html(a)}})}t(1),x("#pageBtn").on("click","input",function(){if("homepage"===x(this).attr("class")&&t(e=1),"prevpage"===x(this).attr("class")){if(1===e)return;t(--e)}if("nextpage"===x(this).attr("class")){if(e===a)return;t(++e)}"endpage"===x(this).attr("class")&&t(e=a)})},t.prototype.addToCart=function(){x("#prolist").on("click",".to-cart input",function(t){var n=new Array,a=new Array,e=new Array,r=x(this).parent().parent().find(".proId").html(),i=x(this).parent().parent().find(".proImg a img").attr("src"),p=x(this).parent().parent().find(".proName").html(),o=x(this).parent().parent().find(".proInfo").html(),s=x(this).parent().parent().find(".bazprice").html(),c=parseInt(r),l=x.cookie("cart");if(null!=l)for(var h=JSON.parse(l),u=0;u<h.length;u++){var f={id:h[u].id,img:h[u].img,name:h[u].name,info:h[u].info,price:h[u].price,num:h[u].num};a.push(f)}for(var m=0;m<a.length;m++)if(a[m].id==c){a[m].num++;break}if(m>=a.length){var d={id:r,img:i,name:p,info:o,price:s,num:1};e.push(d),a=a.concat(e)}n=n.concat(a);var g=JSON.stringify(n);x.cookie("cart",g,{path:"/",expires:1}),k.shopNum();var v=6,y=document.createElement("span");y.innerHTML="+1",x(this).parent().append(y),y.style.top=v+"px";var I=setInterval(function(){v++,y.style.top=v+"px",30<=v&&(clearInterval(I),y.remove())},30)})},new t});